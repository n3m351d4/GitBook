---
cover: >-
  https://images.unsplash.com/photo-1550751827-4bd374c3f58b?crop=entropy&cs=srgb&fm=jpg&ixid=MnwxOTcwMjR8MHwxfHNlYXJjaHwyfHxjeWJlcnxlbnwwfHx8fDE2MzYyODE0OTQ&ixlib=rb-1.2.1&q=85
coverY: 0
---

# Анализ потребляемой мощности

[**Источник**](https://maldroid.github.io/hardware-hacking/)

Загрузите файл и откройте его в программе [Logic](https://maldroid.github.io/hardware-hacking/assets/power\_analysis.logicdata.7z). Вы должны увидите запись длиной одну секунду с 5 попытками ввода пароля. Отправляемые пароли содержат все больше  правильных символов, вплоть до самого пароля. Под каналами TX и RX записан аналоговый канал, который фиксирует напряжение на резисторе, соответствующее потребляемой мощности ЦП.

Если вы увеличите масштаб, то между первой отправкой пароля и первым ответом, вы должны увидеть что-то похожее на рисунок ниже (обратите внимание, как расположены синие поля вверху).

![Power trace of the first password try](https://maldroid.github.io/hardware-hacking/assets/logic-screenshot-power-loops.png)

Далее у вас должен возникнуть вопрос: а где же функция `checkPass`? Мы ищем пять итераций цикла, каждая из которых будет иметь одинаковые инструкции (поскольку все символы неправильные) и одинаковые диаграммы мощности. Постарайтесь найти указанное ниже место в котором один и тот же всплеск потребляемой мощности повторяется пять раз.&#x20;

![](https://maldroid.github.io/hardware-hacking/assets/logic-screenshot-power-loops-annotated.png)

![](<../../.gitbook/assets/image (322).png>)

Надеюсь, вы увидели все 5 итераций цикла. Теперь, когда вы догадались, где находится цикл for, возникает вопрос: есть ли разница между потреблением питания в данном случае и в случае, когда отправляется пароль с частично верными символами?

Для этого мы должны сравнить два скриншота с графикоми питания во время подбора двух разных паролей. Вы можете сделать это в программе Logic, но наложил графики, чтобы облегчить сравнение.

![Two power traces for two different password guesses](https://maldroid.github.io/hardware-hacking/assets/matplotlib-power-traces.png)

Синий  график питания - запрос без правильных символов пароля, а оранжевый - запрос, где первые три символа верны. Увидеть разницу достаточно трудно, поэтому давайте отобразим разницу между графиками мощности.

![The difference between power traces](https://maldroid.github.io/hardware-hacking/assets/matplotlib-differences.png)

Теперь вы ясно видите три довольно больших пика. Если вы внимательно посмотрите на предыдущий график, вы увидите, что оранжевая линия опускается в тех же трех местах. Посмотрите на другие итерации подбора пароля в файле и найдите, сколько символов подобрано верно в каждой из них.

Анализа мощности намного круче, чем атака по времени. Он не только работает там, где нет возможности осуществить атаку по времени, но и основываясь на одном предположении, вы можете вычислить, сколько символов пароля подобрано верно!

Похоже, что единственный способ обезопасить проверку пароля - это ограничить количество подбираемых паролей, скажем, до трех. Давайте посмотрим!
