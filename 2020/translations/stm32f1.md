# Исключительный провал – Взлом защиты от чтения STM32F1

Прошивка микроконтроллеров зачастую содержит ценные данные, такие как интеллектуальная собственность, а иногда и ключи шифрования \(криптографические материалы\). Для их защиты в большинстве микроконтроллеров используют механизмы защиты от чтения. Задача такого механизма – ограничить чтение данных из внутренней флэш памяти злоумышленником, обладающим физическим доступом к устройству. Однако, как исследователи безопасности, так и любители, регулярно показывают, что эти механизмы можно обойти. В данном исследовании мы рассмотрим защиту от чтения флеш памяти в семействе микроконтроллеров STM32F1 STMicroelectronics. Мы обсудим новую уязвимость, эксплуатация которой является первым неинвазивным способом обхода защиты. Причиной этой уязвимости является недостаточное ограничение доступа: чтение данных из флэш-памяти через отладочный интерфейс блокируется, но система прерываний ЦПУ имеет доступ к этим данным по шине ICode. Мы подробно рассмотрим почему и как эта уязвимость раскрывает значительную часть внутренней памяти, тем самым компрометируя устройство.

**\[**[**Видео**](https://blog.zapb.de//files/stm32f1-exceptional-failure/firmware_extraction_1080p.mp4)**\]**

## **Введение**

Для защиты интеллектуальной собственности и прочих ценных данных, таких как ключи шифрования, учетные данные и т.д. – защита внутренней памяти становится задачей первостепенной важности. В том случае, если атакующий получает доступ к прошивке, он может клонировать устройство, изменить его функционал или извлечь учётные данные. В связи с этим защита микроконтроллера играет серьезную роль в безопасности встраиваемых систем. Это касается не только устройств, требующих повышенный уровень защиты, но и коммерческих микроконтроллеров.

Отключение отладочного интерфейса является частым способом противодействия злоумышленникам, однако его реализация отличается у разных микроконтроллеров. К примеру в семействе STM32F0  


